<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="YRN The Jeweller - Exclusive Collection Catalogue. Showcasing luxury pieces for inquiry and negotiation.">
    <title>Catalogue - YRN The Jeweller</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Prata&family=Rubik:ital,wght@0,300..900;1,300..900&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">

    <style>
        /* --- CORE VARIABLES --- */
        :root {
            --color-dark: #0f0f0f;
            --color-mid-dark: #1a1a1a;
            --color-card-bg: #222222;
            --color-gold: #D4AF37;
            --color-gold-light: #F4D03F;
            --color-white: #ffffff;
            --color-text-gray: #aaaaaa;
            
            --font-prata: 'Prata', serif;
            --font-rubik: 'Rubik', sans-serif;
            
            --transition-smooth: all 0.3s ease;
            --color-whatsapp: #25D366;
            
            /* Status Colors */
            --status-new-bg: rgba(76, 175, 80, 0.15);
            --status-new-text: #66bb6a;
            --status-rare-bg: rgba(212, 175, 55, 0.15);
            --status-rare-text: #D4AF37;
            --status-old-bg: rgba(255, 87, 34, 0.15);
            --status-old-text: #ff8a65;
        }

        /* --- RESET & BASE --- */
        body, html {
            font-family: var(--font-rubik);
            background-color: var(--color-dark);
            color: var(--color-white);
            margin: 0;
            padding: 0;
            overflow-x: hidden;
            scroll-behavior: smooth;
        }

        a { text-decoration: none; color: inherit; transition: var(--transition-smooth); }
        ul { list-style: none; padding: 0; margin: 0; }
        button { border: none; outline: none; background: none; font-family: inherit; }
        
        /* Utility */
        .container { max-width: 1400px; margin: 0 auto; padding: 0 1.5rem; }
        .flex { display: flex; }
        .items-center { align-items: center; }
        .justify-between { justify-content: space-between; }
        .text-center { text-align: center; }

        /* --- HEADER --- */
        header {
            background: rgba(15, 15, 15, 0.95);
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 1000;
            border-bottom: 1px solid rgba(255,255,255,0.05);
            backdrop-filter: blur(10px);
        }

        .logo-title { font-family: var(--font-prata); font-size: 1.5rem; margin: 0; letter-spacing: 0.1em; color: var(--color-white); }
        .logo-sub { font-size: 0.6rem; letter-spacing: 0.2em; color: var(--color-gold); display: block; }
        .back-link { font-size: 0.9rem; color: var(--color-text-gray); display: flex; align-items: center; gap: 0.5rem; }
        .back-link:hover { color: var(--color-gold); }

        /* --- CATALOGUE HERO --- */
        .cat-hero {
            padding: 3rem 0 2rem;
            text-align: center;
            background: radial-gradient(circle at center, #1a1a1a 0%, #0f0f0f 100%);
        }
        .cat-title { font-family: var(--font-prata); font-size: 2.5rem; margin-bottom: 0.5rem; color: var(--color-gold); }
        .cat-subtitle { color: var(--color-text-gray); font-size: 0.9rem; letter-spacing: 0.05em; max-width: 600px; margin: 0 auto; }

        /* --- NEW SEARCH BAR STYLE --- */
        .search-container {
            padding: 1rem 0;
            background: var(--color-dark);
        }
        .search-box {
            position: relative;
            max-width: 500px;
            margin: 0 auto;
        }
        .search-box input {
            width: 100%;
            padding: 0.8rem 1rem 0.8rem 2.8rem;
            background: var(--color-mid-dark);
            border: 1px solid rgba(212, 175, 55, 0.3);
            border-radius: 50px;
            color: white;
            font-family: var(--font-rubik);
            outline: none;
            transition: var(--transition-smooth);
        }
        .search-box input:focus { border-color: var(--color-gold); }
        .search-box i {
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--color-gold);
            opacity: 0.7;
        }

        /* --- CATEGORY NAVIGATION --- */
        .category-nav-wrapper {
            position: sticky;
            top: 73px; 
            background: var(--color-dark);
            z-index: 900;
            border-bottom: 1px solid rgba(255,255,255,0.05);
            padding: 1rem 0;
            box-shadow: 0 10px 20px rgba(0,0,0,0.5);
        }

        .category-scroll {
            display: flex;
            gap: 0.8rem;
            overflow-x: auto;
            padding-bottom: 5px;
            scrollbar-width: none; 
        }
        .category-scroll::-webkit-scrollbar { display: none; } 

        .cat-btn {
            background: var(--color-mid-dark);
            border: 1px solid rgba(255,255,255,0.1);
            color: var(--color-white);
            padding: 0.6rem 1.2rem;
            border-radius: 50px;
            white-space: nowrap;
            cursor: pointer;
            transition: var(--transition-smooth);
            font-size: 0.85rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .cat-btn:hover, .cat-btn.active {
            background: var(--color-gold);
            color: #000;
            border-color: var(--color-gold);
            font-weight: 600;
        }

        /* --- MAIN LAYOUT --- */
        .catalogue-layout {
            display: grid;
            grid-template-columns: 250px 1fr;
            gap: 2rem;
            padding: 2rem 0 5rem;
            align-items: start;
        }

        @media (max-width: 992px) {
            .catalogue-layout { grid-template-columns: 1fr; }
        }

        /* --- FILTER SIDEBAR --- */
        .sidebar {
            background: var(--color-mid-dark);
            padding: 1.5rem;
            border-radius: 8px;
            border: 1px solid rgba(255,255,255,0.05);
            position: sticky;
            top: 150px;
        }

        .filter-group { margin-bottom: 2rem; }
        .filter-title { 
            font-family: var(--font-prata); 
            font-size: 1.1rem; 
            margin-bottom: 1rem; 
            border-bottom: 1px solid var(--color-gold); 
            padding-bottom: 0.5rem; 
            display: inline-block; 
            color: var(--color-white);
        }
        
        .filter-option {
            display: flex;
            align-items: center;
            margin-bottom: 0.8rem;
            cursor: pointer;
            color: var(--color-text-gray);
            font-size: 0.9rem;
            transition: color 0.2s;
        }
        .filter-option:hover { color: var(--color-gold); }
        .filter-checkbox {
            margin-right: 0.8rem;
            accent-color: var(--color-gold);
            width: 16px;
            height: 16px;
            cursor: pointer;
        }

        .mobile-filter-toggle {
            display: none;
            width: 100%;
            padding: 1rem;
            background: var(--color-mid-dark);
            border: 1px solid var(--color-gold);
            color: var(--color-gold);
            margin-bottom: 1rem;
            cursor: pointer;
            text-align: center;
            font-weight: bold;
            border-radius: 8px;
        }
        
        @media (max-width: 992px) {
            .mobile-filter-toggle { display: block; }
            .sidebar { display: none; margin-bottom: 2rem; }
            .sidebar.active { display: block; position: relative; top: 0; }
        }

        /* --- PRODUCT GRID --- */
        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 2rem;
        }

        @media (max-width: 600px) {
            .product-grid {
                grid-template-columns: 1fr 1fr; 
                gap: 10px; 
            }
            .container { padding: 0 1rem; }
        }

        /* --- PRODUCT CARD --- */
        .prod-card {
            background: var(--color-card-bg);
            border-radius: 8px;
            overflow: hidden;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 1px solid rgba(255,255,255,0.05);
            display: flex;
            flex-direction: column;
            opacity: 0; 
            animation: fadeIn 0.6s ease forwards;
        }

        @keyframes fadeIn { to { opacity: 1; } }

        .prod-card:hover { 
            transform: translateY(-5px); 
            border-color: var(--color-gold); 
            box-shadow: 0 5px 20px rgba(0,0,0,0.3); 
        }

        .prod-img-wrapper {
            position: relative;
            aspect-ratio: 1;
            overflow: hidden;
            background-color: #000;
        }

        .prod-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.6s ease, opacity 0.3s ease;
            opacity: 0; 
        }
        .prod-img.loaded { opacity: 1; }

        .prod-card:hover .prod-img { transform: scale(1.1); }

        .badge {
            position: absolute;
            top: 10px;
            left: 10px;
            font-size: 0.65rem;
            font-weight: 700;
            padding: 4px 8px;
            border-radius: 4px;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            z-index: 2;
        }

        .prod-info { 
            padding: 1.2rem; 
            flex-grow: 1; 
            display: flex; 
            flex-direction: column; 
        }

        @media (max-width: 600px) {
            .prod-info { padding: 0.8rem; }
        }

        .prod-cat { font-size: 0.7rem; color: var(--color-text-gray); text-transform: uppercase; margin-bottom: 0.3rem; }
        .prod-title { 
            font-family: var(--font-prata); 
            font-size: 1.1rem; 
            margin-bottom: 0.8rem; 
            line-height: 1.3;
            color: var(--color-white);
            white-space: nowrap; 
            overflow: hidden;
            text-overflow: ellipsis; 
        }

        .prod-specs {
            display: flex;
            justify-content: space-between;
            background: rgba(255,255,255,0.03);
            padding: 0.6rem 0.8rem;
            border-radius: 4px;
            margin-bottom: 1rem;
        }
        .spec-item { display: flex; flex-direction: column; align-items: center; }
        .spec-label { font-size: 0.6rem; color: var(--color-text-gray); text-transform: uppercase; }
        .spec-val { font-size: 0.8rem; font-weight: 500; color: var(--color-white); }

        .prod-footer {
            margin-top: auto;
            text-align: center;
        }

        .whatsapp-btn {
            background-color: var(--color-whatsapp);
            color: #fff;
            padding: 0.7rem 1rem;
            border-radius: 50px;
            font-size: 0.8rem;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            width: 100%;
            transition: background-color 0.2s ease;
            box-sizing: border-box;
        }
        
        .whatsapp-btn:hover { background-color: #128C7E; }

        footer {
            background: #050505;
            padding: 3rem 0;
            border-top: 1px solid rgba(255,255,255,0.05);
            text-align: center;
            color: #666;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>

    <header>
        <div class="container flex justify-between items-center">
            <a href="index.html" class="back-link"><i class="fas fa-arrow-left"></i> Home</a>
            <div class="text-center">
                <h1 class="logo-title">YRN</h1>
                <span class="logo-sub">CATALOGUE</span>
            </div>
            <div style="width: 60px;"></div> 
        </div>
    </header>

    <section class="cat-hero">
        <div class="container">
            <h2 class="cat-title">The Exclusive Collection</h2>
            <p class="cat-subtitle">Explore 50 masterfully crafted pieces available for immediate inquiry.</p>
        </div>
    </section>

    <div class="search-container">
        <div class="container">
            <div class="search-box">
                <i class="fas fa-search"></i>
                <input type="text" id="searchInput" placeholder="Search by name (e.g. Cuban Link)...">
            </div>
        </div>
    </div>

    <div class="category-nav-wrapper">
        <div class="container">
            <div class="category-scroll" id="categoryNav">
                <button class="cat-btn active" data-filter="all">All Items</button>
                <button class="cat-btn" data-filter="ring"><i class="fas fa-ring"></i> Rings</button>
                <button class="cat-btn" data-filter="watch"><i class="fas fa-clock"></i> Watches</button>
                <button class="cat-btn" data-filter="bangle"><i class="fas fa-circle-notch"></i> Bangles</button>
                <button class="cat-btn" data-filter="necklace"><i class="far fa-gem"></i> Necklaces</button>
                <button class="cat-btn" data-filter="diamond"><i class="fas fa-gem"></i> Diamonds</button>
                <button class="cat-btn" data-filter="earring"><i class="fas fa-star"></i> Earrings</button>
            </div>
        </div>
    </div>

    <div class="container catalogue-layout">
        <div>
            <button class="mobile-filter-toggle" onclick="document.querySelector('.sidebar').classList.toggle('active')">
                <i class="fas fa-filter"></i> Filter & Sort
            </button>
            
            <aside class="sidebar" id="filterSidebar">
                <div class="filter-group" data-group="status">
                    <h4 class="filter-title">Product Status</h4>
                    <label class="filter-option"><input type="checkbox" class="filter-checkbox" value="new"> New Arrival</label>
                    <label class="filter-option"><input type="checkbox" class="filter-checkbox" value="rare"> Rare Find</label>
                    <label class="filter-option"><input type="checkbox" class="filter-checkbox" value="old"> Pre-Owned</label>
                </div>

                <div class="filter-group" data-group="quality">
                    <h4 class="filter-title">Purity</h4>
                    <label class="filter-option"><input type="checkbox" class="filter-checkbox" value="18k"> 18k Gold</label>
                    <label class="filter-option"><input type="checkbox" class="filter-checkbox" value="22k"> 22k Gold</label>
                    <label class="filter-option"><input type="checkbox" class="filter-checkbox" value="24k"> 24k Pure</label>
                    <label class="filter-option"><input type="checkbox" class="filter-checkbox" value="platinum"> Platinum</label>
                </div>

                <div class="filter-group" data-group="weight">
                    <h4 class="filter-title">Weight Class</h4>
                    <label class="filter-option"><input type="checkbox" class="filter-checkbox" value="light"> Light (< 10g)</label>
                    <label class="filter-option"><input type="checkbox" class="filter-checkbox" value="medium"> Medium (10-50g)</label>
                    <label class="filter-option"><input type="checkbox" class="filter-checkbox" value="heavy"> Heavy (> 50g)</label>
                </div>
            </aside>
        </div>

        <main class="product-grid" id="productGrid"></main>
    </div>

    <footer>
        <div class="container">
            <p>&copy; 2025 YRN Jewelers. All Rights Reserved.</p>
        </div>
    </footer>

    <script>
        // --- MANUAL COLLECTION DATA (50 SLOTS) ---
        // Edit names, grams, and quality. 
        // Set imgUrl: "" to trigger SOLD OUT view.
        // --- MANUAL COLLECTION DATA (UPDATED WITH YOUR FILENAMES) ---
       // --- DATA COLLECTION (50 SLOTS) ---
        const ALL_PRODUCTS = [
            { id: 1, name: "Ice Ring ", category: "ring", status: { text: 'New Arrival', val: 'new', color: '#66bb6a', bg: 'rgba(76,175,80,0.1)' }, grams: "undisclosed", weightCategory: "medium", quality: "ice", imgUrl: "ice-ring 1.jpg" },
            { id: 2, name: "Ice Ring ", category: "ring", status: { text: 'New Arrival', val: 'new', color: '#66bb6a', bg: 'rgba(76,175,80,0.1)' }, grams: "undisclosed", weightCategory: "medium", quality: "ice", imgUrl: "ice-ring 2.jpg" },
            { id: 3, name: "Ice Ring ", category: "ring", status: { text: 'Rare Find', val: 'rare', color: '#D4AF37', bg: 'rgba(212,175,55,0.1)' }, grams: "undisclosed", weightCategory: "medium", quality: "18k Gold", imgUrl: "ice-ring 3.jpg" },
            { id: 4, name: "Ice Ring ", category: "ring", status: { text: 'New Arrival', val: 'new', color: '#66bb6a', bg: 'rgba(76,175,80,0.1)' }, grams: "undisclosed", weightCategory: "medium", quality: "ice", imgUrl: "ice-ring 4.jpg" },
            { id: 5, name: "Ice Ring ", category: "ring", status: { text: 'New Arrival', val: 'new', color: '#66bb6a', bg: 'rgba(76,175,80,0.1)' }, grams: "undisclosed", weightCategory: "medium", quality: "ice", imgUrl: "ice-ring 5.jpg" },
            { id: 6, name: "Pendant", category: "necklace", status: { text: 'Rare Find', val: 'rare', color: '#D4AF37', bg: 'rgba(212,175,55,0.1)' }, grams: "47.5g", weightCategory: "medium", quality: "22k Gold", imgUrl: "pendant-47.5.jpg" },
            { id: 7, name: "Pendant", category: "necklace", status: { text: 'Rare Find', val: 'rare', color: '#D4AF37', bg: 'rgba(212,175,55,0.1)' }, grams: "96.8g", weightCategory: "heavy", quality: "22k Gold", imgUrl: "pendant-96.8.jpg" },
            { id: 8, name: "Tiny chain", category: "necklace", status: { text: 'New Arrival', val: 'new', color: '#66bb6a', bg: 'rgba(76,175,80,0.1)' }, grams: "3.2g", weightCategory: "light", quality: "18k Gold", imgUrl: "tiny-3.2.jpg" },
            { id: 9, name: "Tiny chain", category: "necklace", status: { text: 'New Arrival', val: 'new', color: '#66bb6a', bg: 'rgba(76,175,80,0.1)' }, grams: "4.3g", weightCategory: "light", quality: "18k Gold", imgUrl: "tiny-4.3.jpg" },
            { id: 10, name: "Tiny chain", category: "necklace", status: { text: 'New Arrival', val: 'new', color: '#66bb6a', bg: 'rgba(76,175,80,0.1)' }, grams: "4.5g", weightCategory: "light", quality: "18k Gold", imgUrl: "tiny-4.5.jpg" },
            { id: 11, name: "Tiny 4.4", category: "necklace", status: { text: 'New Arrival', val: 'new', color: '#66bb6a', bg: 'rgba(76,175,80,0.1)' }, grams: "4.4g", weightCategory: "light", quality: "18k Gold", imgUrl: "tiy-4.4.jpg" },
            { id: 12, name: "Twist chain", category: "necklace", status: { text: 'Rare Find', val: 'rare', color: '#D4AF37', bg: 'rgba(212,175,55,0.1)' }, grams: "22.2g", weightCategory: "medium", quality: "18k Gold", imgUrl: "twist 22.2.jpg" },
            { id: 13, name: "Twist chain", category: "necklace", status: { text: 'Pre-Owned', val: 'old', color: '#ff8a65', bg: 'rgba(255,87,34,0.1)' }, grams: "2.2g", weightCategory: "light", quality: "18k Gold", imgUrl: "twist-2.2.jpg" },
            { id: 14, name: "Twist chain", category: "necklace", status: { text: 'New Arrival', val: 'new', color: '#66bb6a', bg: 'rgba(76,175,80,0.1)' }, grams: "9.8g", weightCategory: "light", quality: "18k Gold", imgUrl: "twist-9.8.jpg" },
            { id: 15, name: "Twist chain", category: "necklace", status: { text: 'New Arrival', val: 'new', color: '#66bb6a', bg: 'rgba(76,175,80,0.1)' }, grams: "9.9g", weightCategory: "light", quality: "18k Gold", imgUrl: "twist-9.9.jpg" },
            { id: 16, name: "Twist chain", category: "necklace", status: { text: 'New Arrival', val: 'new', color: '#66bb6a', bg: 'rgba(76,175,80,0.1)' }, grams: "11.2g", weightCategory: "medium", quality: "18k Gold", imgUrl: "twist-11.2.jpg" },
            { id: 17, name: "Twist chain", category: "necklace", status: { text: 'New Arrival', val: 'new', color: '#66bb6a', bg: 'rgba(76,175,80,0.1)' }, grams: "11.3g", weightCategory: "medium", quality: "18k Gold", imgUrl: "twist-11.3.jpg" },
            { id: 18, name: "Twist chain", category: "necklace", status: { text: 'New Arrival', val: 'new', color: '#66bb6a', bg: 'rgba(76,175,80,0.1)' }, grams: "13.6g", weightCategory: "medium", quality: "18k Gold", imgUrl: "twist-13.6.jpg" },
            { id: 19, name: "Twist chain", category: "necklace", status: { text: 'New Arrival', val: 'new', color: '#66bb6a', bg: 'rgba(76,175,80,0.1)' }, grams: "15.4g", weightCategory: "medium", quality: "18k Gold", imgUrl: "twist-15.4.jpg" },
            { id: 20, name: "Twist chain", category: "necklace", status: { text: 'Rare Find', val: 'rare', color: '#D4AF37', bg: 'rgba(212,175,55,0.1)' }, grams: "22.7g", weightCategory: "medium", quality: "18k Gold", imgUrl: "twist-22.7.jpg" },
            { id: 20, name: "Cartier watch", category: "watch", status: { text: 'Rare Find', val: 'rare', color: '#D4AF37', bg: 'rgba(212,175,55,0.1)' }, grams: "undisclosed", weightCategory: "medium", quality: "", imgUrl: "cartier watch.jpg" },
            { id: 20, name: "Twist chain", category: "necklace", status: { text: 'Rare Find', val: 'rare', color: '#D4AF37', bg: 'rgba(212,175,55,0.1)' }, grams: "62.3g", weightCategory: "medium", quality: "18k Gold", imgUrl: "62.3.jpg" },
            { id: 20, name: "Cuban", category: "necklace", status: { text: 'Rare Find', val: 'rare', color: '#D4AF37', bg: 'rgba(212,175,55,0.1)' }, grams: "134.8g", weightCategory: "medium", quality: "18k Gold", imgUrl: "cuban 134.8.jpg" },
            { id: 20, name: "Ring", category: "ring", status: { text: 'Rare Find', val: 'rare', color: '#D4AF37', bg: 'rgba(212,175,55,0.1)' }, grams: "2.3g", weightCategory: "medium", quality: "18k Gold", imgUrl: "ring 2.3.jpg" },
            { id: 20, name: "Ring", category: "ring", status: { text: 'Rare Find', val: 'rare', color: '#D4AF37', bg: 'rgba(212,175,55,0.1)' }, grams: "2.4g", weightCategory: "medium", quality: "18k Gold", imgUrl: "ring 2.4.jpg" },
            { id: 20, name: "Twist chain", category: "necklace", status: { text: 'Rare Find', val: 'rare', color: '#D4AF37', bg: 'rgba(212,175,55,0.1)' }, grams: "31.3g", weightCategory: "medium", quality: "18k Gold", imgUrl: "twist 31.3.jpg" },
            { id: 20, name: "Twist chain", category: "necklace", status: { text: 'Rare Find', val: 'rare', color: '#D4AF37', bg: 'rgba(212,175,55,0.1)' }, grams: "53.5g", weightCategory: "medium", quality: "18k Gold", imgUrl: "twist 53.5.jpg" },
            { id: 20, name: "Twist chain", category: "necklace", status: { text: 'Rare Find', val: 'rare', color: '#D4AF37', bg: 'rgba(212,175,55,0.1)' }, grams: "70.0g", weightCategory: "medium", quality: "18k Gold", imgUrl: "twist chain 70.0.jpg" }

        ];

        for(let i=21; i<=50; i++) {
            ALL_PRODUCTS.push({ id: i, name: `Luxury Item #${i}`, category: "ring", status: { text: 'New Arrival', val: 'new', color: '#66bb6a', bg: 'rgba(76,175,80,0.1)' }, grams: "10g", weightCategory: "medium", quality: "18k", imgUrl: "" });
        }

        // --- RENDER & FILTER LOGIC ---
        const grid = document.getElementById('productGrid');
        const searchInput = document.getElementById('searchInput');
        let activeFilters = { category: 'all', status: [], quality: [], weight: [], search: '' };
        
        function renderProducts(productsToRender) {
            grid.innerHTML = '';
            
            if (productsToRender.length === 0) {
                grid.innerHTML = '<div style="grid-column: 1/-1; text-align: center; padding: 3rem; color: #666;">No pieces found matching your criteria.</div>';
                return;
            }

            const fragment = document.createDocumentFragment();

            productsToRender.forEach((p, idx) => {
                const isSoldOut = !p.imgUrl || p.imgUrl.trim() === "";
                const card = document.createElement('article');
                card.className = 'prod-card';
                card.style.animationDelay = `${idx * 0.05}s`;

                const imgHTML = isSoldOut 
                    ? `<div style="width:100%; height:100%; display:flex; align-items:center; justify-content:center; background:#111; color:var(--color-gold); font-weight:bold; flex-direction:column; gap:10px;">
                        <i class="fas fa-lock" style="font-size:1.5rem; opacity:0.4;"></i>
                        <span style="letter-spacing:2px; font-size:0.9rem;">SOLD OUT</span>
                       </div>`
                    : `<img data-src="${p.imgUrl}" alt="${p.name}" class="prod-img" loading="lazy">`;

                const buttonHTML = isSoldOut
                    ? `<button class="whatsapp-btn" style="background:#333; cursor:not-allowed; opacity:0.6;" disabled>Out of Stock</button>`
                    : `<a href="https://wa.me/2348185727263?text=Hello%20YRN,%20I%20am%20interested%20in%20the%20${encodeURIComponent(p.name)}%20(${p.grams})%20from%20your%20catalogue." 
                        target="_blank" class="whatsapp-btn"><i class="fab fa-whatsapp"></i> Negotiate</a>`;

                card.innerHTML = `
                    <div class="prod-img-wrapper">
                        ${imgHTML}
                        <span class="badge" style="background-color: ${p.status.bg}; color: ${p.status.color};">
                            ${isSoldOut ? 'Unavailable' : p.status.text}
                        </span>
                    </div>
                    <div class="prod-info">
                        <div class="prod-cat">${p.category}</div>
                        <h3 class="prod-title">${p.name}</h3>
                        <div class="prod-specs">
                            <div class="spec-item"><span class="spec-label">Weight</span><span class="spec-val">${p.grams}</span></div>
                            <div class="spec-item"><span class="spec-label">Purity</span><span class="spec-val">${p.quality}</span></div>
                        </div>
                        <div class="prod-footer">${buttonHTML}</div>
                    </div>`;
                fragment.appendChild(card);
            });
            grid.appendChild(fragment);
            observeImages();
        }

        function observeImages() {
            const imageObserver = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting && entry.target.tagName === 'IMG') {
                        const img = entry.target;
                        img.src = img.getAttribute('data-src');
                        img.onload = () => img.classList.add('loaded');
                        observer.unobserve(img);
                    }
                });
            }, { rootMargin: '50px' });
            document.querySelectorAll('.prod-img').forEach(img => imageObserver.observe(img));
        }

        function applyFilters() {
            let filtered = ALL_PRODUCTS;

            // Search Filter
            if (activeFilters.search) {
                filtered = filtered.filter(p => p.name.toLowerCase().includes(activeFilters.search.toLowerCase()));
            }
            // Category Filter
            if (activeFilters.category !== 'all') {
                filtered = filtered.filter(p => p.category === activeFilters.category);
            }
            // Sidebar Filters
            if (activeFilters.status.length > 0) {
                filtered = filtered.filter(p => activeFilters.status.includes(p.status.val));
            }
            if (activeFilters.quality.length > 0) {
                filtered = filtered.filter(p => activeFilters.quality.some(q => p.quality.toLowerCase().includes(q)));
            }
            if (activeFilters.weight.length > 0) {
                filtered = filtered.filter(p => activeFilters.weight.includes(p.weightCategory));
            }

            renderProducts(filtered);
        }

        // --- EVENT LISTENERS ---
        searchInput.addEventListener('input', (e) => {
            activeFilters.search = e.target.value;
            applyFilters();
        });

        document.querySelectorAll('.cat-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.cat-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                activeFilters.category = btn.dataset.filter;
                applyFilters();
            });
        });

        document.querySelectorAll('.filter-checkbox').forEach(cb => {
            cb.addEventListener('change', (e) => {
                const groupType = e.target.closest('.filter-group').dataset.group;
                if (e.target.checked) activeFilters[groupType].push(e.target.value);
                else activeFilters[groupType] = activeFilters[groupType].filter(item => item !== e.target.value);
                applyFilters();
            });
        });

        window.addEventListener('load', () => renderProducts(ALL_PRODUCTS));
    </script>
</body>
</html>